if [[ "$MY_ENV_EXPORTED"x == "true"x ]]; then
   return 0
fi

export PATH=~/bin:~/node_modules/.bin:$PATH

if [[ "$OSTYPE" == "darwin"* ]]; then
    export PATH=/Library/TeX/texbin:$PATH
    ## for cross compile in macos

    for file in /usr/local/opt/*
    do
        if [ -d $file ] && [ -d $file/libexec/gnubin ]
        then
              export PATH=$file/libexec/gnubin:$PATH
        fi
    done
    ## homebrew mirror
    export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles
    if [ -d $HOME/work/x-tools/aarch64-unknown-linux-gnu/bin ]; then
       export PATH="$HOME//work/x-tools/aarch64-unknown-linux-gnu/bin:$PATH"
    fi
fi

if [[ "$SSH_CONNECTION" != "" && "$SCHSPA_SSHFS_DIR" != "" && "$SCHSPA_SSHFS_TARGET" != "" ]]; then
	echo "mount sshfs on $SCHSPA_SSHFS_TARGET"
	if [ "`ls -A ${SCHSPA_SSHFS_TARGET}`" = "" ]; then
		sshfs $(echo $SSH_CONNECTION | awk '{print $1}'):$SCHSPA_SSHFS_DIR "$HOME/$SCHSPA_SSHFS_TARGET"
	fi
fi

export MY_ENV_EXPORTED=true
